<!doctype html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script>

  <link rel="stylesheet" href="https://dev3.atsign.wtf/main.f8b36ed0f05d2775f90e645f64302614d21865e178fac4c9436a99f4ff89292e437aae4623f104d0460594b5bd7d163ae1a67eb22fe0eec4bc0b726f23d1bf00.css" integrity="sha512-&#43;LNu0PBdJ3X5DmRfZDAmFNIYZeF4&#43;sTJQ2qZ9P&#43;JKS5Deq5GI/EE0EYFlLW9fRY64aZ&#43;si/g7sS8C3JvI9G/AA==" crossorigin="anonymous">
<noscript><style>img.lazyload { display: none; }</style></noscript>
  <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <title>Protocol Specification - atPlatform</title>
<meta name="description" content="The specification of the atProtocol on the atPlatform">
<link rel="canonical" href="https://dev3.atsign.wtf/atplatform/specification/">
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Protocol Specification">
<meta property="og:description" content="The specification of the atProtocol on the atPlatform">
<meta property="og:url" content="https://dev3.atsign.wtf/atplatform/specification/">
<meta property="og:site_name" content="atPlatform">
<meta property="article:modified_time" content="2023-10-17T17:25:21+01:00">
  
  <meta property="og:image" content="https://atsign.com/wp-content/uploads/2023/09/orange-nodes-bg-bottom.png"/>
      <meta property="og:image:alt" content="atPlatform">
    
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="atsigncompany">
<meta name="twitter:creator" content="atsigncompany">
<meta name="twitter:title" content="Protocol Specification">
<meta name="twitter:description" content="The specification of the atProtocol on the atPlatform">
<meta name="twitter:image" content="https://atsign.com/wp-content/uploads/2023/09/orange-nodes-bg-bottom.png">
    <meta name="twitter:image:alt" content="Protocol Specification">

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "Person",
        "@id": "https://dev3.atsign.wtf/#/schema/person/1",
      "name": "",
      "url": "https://dev3.atsign.wtf/",
      "sameAs": [
        ],
      "image": {
          "@type": "ImageObject",
          "@id": "https://dev3.atsign.wtf/#/schema/image/1",
          "url": "https://dev3.atsign.wtf/\u003cnil\u003e",
          "width":  null ,
          "height":  null ,
          "caption": ""
        }
      },
    {
      "@type": "WebSite",
      "@id": "https://dev3.atsign.wtf/#/schema/website/1",
      "url": "https://dev3.atsign.wtf/",
      "name": "atPlatform",
      "description": "The atPlatform is the fastest and easiest way to develop peer-to-peer, end-to-end encrypted apps.\n",
      "publisher": {
          "@id": "https://dev3.atsign.wtf/#/schema/person/1"
        }
      },
    {
      "@type": "WebPage",
      "@id": "https://dev3.atsign.wtf/atplatform/specification/",
      "url": "https://dev3.atsign.wtf/atplatform/specification/",
      "name": "Protocol Specification",
      "description": "The specification of the atProtocol on the atPlatform",
      "isPartOf": {
        "@id": "https://dev3.atsign.wtf/#/schema/website/1"
      },
      "about": {
          "@id": "https://dev3.atsign.wtf/#/schema/person/1"
        },
      "datePublished": "0001-01-01T00:00:00CET",
      "dateModified": "2023-10-17T17:25:21CET",
      "breadcrumb": {
        "@id": "https://dev3.atsign.wtf/atplatform/specification/#/schema/breadcrumb/1"
      },
      "primaryImageOfPage": {
        "@id": "https://dev3.atsign.wtf/atplatform/specification/#/schema/image/2"
      },
      "inLanguage": "",
      "potentialAction": [{
        "@type": "ReadAction", "target": ["https://dev3.atsign.wtf/atplatform/specification/"]
      }]
    },
    {
      "@type": "BreadcrumbList",
      "@id": "https://dev3.atsign.wtf/atplatform/specification/#/schema/breadcrumb/1",
      "name": "Breadcrumbs",
      "itemListElement": [{
        "@type": "ListItem",
        "position":  1 ,
        "item": {
          "@type": "WebPage",
          "@id": "https://dev3.atsign.wtf/",
          "url": "https://dev3.atsign.wtf/",
          "name": "Home"
          }
        },{
        "@type": "ListItem",
        "position":  2 ,
        "item": {
          "@type": "WebPage",
          "@id": "https://dev3.atsign.wtf/atplatform/",
          "url": "https://dev3.atsign.wtf/atplatform/",
          "name": "Atplatform"
          }
        },{
        "@type": "ListItem",
        "position":  3 ,
        "item": {
          "@id": "https://dev3.atsign.wtf/atplatform/specification/"
          }
        }]
    },

    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "ImageObject",
          "@id": "https://dev3.atsign.wtf/atplatform/specification/#/schema/image/2",
          "url": "https://atsign.com/wp-content/uploads/2023/09/orange-nodes-bg-bottom.png",
          "contentUrl": "https://atsign.com/wp-content/uploads/2023/09/orange-nodes-bg-bottom.png",
          "caption": "Protocol Specification"
        }
      ]
    }

  ]
}
</script>

  <meta name="theme-color" content="#fff">
<link rel="apple-touch-icon" sizes="180x180" href="https://dev3.atsign.wtf/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://dev3.atsign.wtf/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://dev3.atsign.wtf/favicon-16x16.png">
<link rel="manifest" crossorigin="use-credentials" href="https://dev3.atsign.wtf/site.webmanifest">

</head>
  <body class="atplatform single">
    <header class="navbar navbar-expand-lg navbar-light doks-navbar">
  <nav class="container-fluid" aria-label="Main navigation">
    <a class="navbar-brand p-0 me-auto" href="https://dev3.atsign.wtf/" aria-label="atPlatform">
      
      
        <img class="toggle-light" src="https://dev3.atsign.wtf/img/branding/dark/lockup-dark.png" width="320em">
      

      
      
        <img class="toggle-dark" src="https://dev3.atsign.wtf/img/branding/light/lockup-light.png" width="320em">
      
    </a>

    <div class="offcanvas offcanvas-end border-0 py-lg-1" tabindex="-1" id="offcanvasDoks" data-bs-backdrop="true" aria-labelledby="offcanvasDoksLabel">
      <div class="offcanvas-header d-lg-none">
        
      
        <img class="toggle-light" src="https://dev3.atsign.wtf/img/branding/dark/lockup-dark.png" width="320em">
      

      
      
        <img class="toggle-dark" src="https://dev3.atsign.wtf/img/branding/light/lockup-light.png" width="320em">
      
        <button type="button" class="btn-close text-reset me-2" data-bs-dismiss="offcanvas" aria-label="Close main menu"></button>
      </div>
      <div class="offcanvas-body px-4">
        <h3 class="h6 text-uppercase mb-3 d-lg-none">Quick Links</h3>
        <ul class="nav flex-column flex-lg-row ms-md-n3">
  
      <li class="nav-item">
        <a class="nav-link ps-0 py-1" href="https://dev3.atsign.wtf/start/">Get Started</a>
      </li>
    
  
      <li class="nav-item">
        <a class="nav-link ps-0 py-1" href="https://my.atsign.com/go">Get an atSign</a>
      </li>
    
  
      <li class="nav-item">
        <a class="nav-link ps-0 py-1" href="https://github.com/atsign-foundation">GitHub</a>
      </li>
    
  
      <li class="nav-item">
        <a class="nav-link ps-0 py-1" href="https://atsign.com">atsign.com</a>
      </li>
    
  
      <li class="nav-item">
        <a class="nav-link ps-0 py-1" href="https://github.com/atsign-foundation/docs.atsign.com/issues/new/choose">Open Issue</a>
      </li>
    
  </ul>
        <hr class="text-black-50 my-4 d-lg-none">
        <h3 class="h6 text-uppercase mb-3 d-lg-none">Navigate</h3>
        <span class="d-lg-none">
          
<ul class="list-unstyled collapsible-sidebar">
  
    
    <li class="mb-1">
      <button class="btn btn-toggle default-text align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#section-e0c4332e8c13be976552a059f106354f" aria-expanded="false">
        Get Started
      </button>
      <div class="collapse" id="section-e0c4332e8c13be976552a059f106354f">
        <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/start/flutter/">Flutter</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/start/java/">Java</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/start/iot/">IoT</a></li>
              
            
          
        </ul>
      </div>
    </li>
  
    
    <li class="mb-1">
      <button class="btn btn-toggle default-text align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#section-130ddfce9c28453883ccfe2da8b6d5ac" aria-expanded="false">
        Tutorials
      </button>
      <div class="collapse" id="section-130ddfce9c28453883ccfe2da8b6d5ac">
        <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
          
            
              
              
              
              
              <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/tutorials/atmosphere-pro/1-introduction/">atmosphere pro</a></li>
            
          
            
              
              
              
              
              <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/tutorials/at-dude/_10_profile_screen/">atDude Tutorial</a></li>
            
          
            
              
              
              
              
              <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/tutorials/sshnp/1-prerequisites/">Ssh! No Ports</a></li>
            
          
            
              
                
                <li class="my-1 ms-3">
                  <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#section-5a5c507983026cf2af9f40acb713f707" aria-expanded="false">
                    at_demos
                  </button>
                  <div class="collapse" id="section-5a5c507983026cf2af9f40acb713f707">
                    <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                      
                    </ul>
                  </div>
                </li>
              
            
          
            
              
                
                <li class="my-1 ms-3">
                  <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#section-76633bb1ac6de866df853afb3570dcd5" aria-expanded="false">
                    dess
                  </button>
                  <div class="collapse" id="section-76633bb1ac6de866df853afb3570dcd5">
                    <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                      
                        
                          
                          
                          
                          
                          <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/tutorials/dess/aws/1-introduction/">Setup dess on AWS</a></li>
                        
                      
                        
                          
                          
                          
                          
                          <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/tutorials/dess/gcp/1-introduction/">Setup dess on GCP</a></li>
                        
                      
                        
                          
                          
                          
                          
                          <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/tutorials/dess/rpi/1-introduction/">Setup dess on a Raspberry Pi</a></li>
                        
                      
                    </ul>
                  </div>
                </li>
              
            
          
        </ul>
      </div>
    </li>
  
    
    <li class="mb-1">
      <button class="btn btn-toggle default-text align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#section-e0d05f991f966012c2faab6947c0f48e" aria-expanded="false">
        SDK Reference
      </button>
      <div class="collapse" id="section-e0d05f991f966012c2faab6947c0f48e">
        <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
          
            
              
              
              
              
              <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/sdk/flutter/introduction/">Flutter</a></li>
            
          
            
              
              
              
              
              <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/sdk/java/introduction/">Java</a></li>
            
          
        </ul>
      </div>
    </li>
  
    
    <li class="mb-1">
      <button class="btn btn-toggle default-text align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#section-f1cfbb26098a251a8c16653a09a31da9" aria-expanded="true">
        The atPlatform
      </button>
      <div class="collapse show" id="section-f1cfbb26098a251a8c16653a09a31da9">
        <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/atplatform/atplatformoverview/">Overview</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/atplatform/architecture/">Architecture</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded active" href="https://dev3.atsign.wtf/atplatform/specification/">Protocol Specification</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/atplatform/rootserver/">atDirectory</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/atplatform/secondaryserver/">atServer</a></li>
              
            
          
        </ul>
      </div>
    </li>
  
    
    <li class="mb-1">
      <button class="btn btn-toggle default-text align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#section-63d5049791d9d79d86e9a108b0a999ca" aria-expanded="false">
        Reference
      </button>
      <div class="collapse" id="section-63d5049791d9d79d86e9a108b0a999ca">
        <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/reference/atsign/">atSign</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/reference/pricing-and-costs/">Pricing / Costs</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/reference/encryption/">Encryption</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/reference/privacy/">Privacy</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/reference/polymorphism/">Polymorphism</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/reference/public-private-keys/">Public and Private Keys</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/reference/self-encryption-key/">Self-Encryption Key</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/reference/cram/">CRAM</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/reference/pkam/">PKAM</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/reference/namespace/">Namespace</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/reference/synchronization/">Synchronization</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/reference/notification/">Notification</a></li>
              
            
          
        </ul>
      </div>
    </li>
  
    
    <li class="mb-1">
      <button class="btn btn-toggle default-text align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#section-c20ef24abeeca4e301dcb6590a9fa683" aria-expanded="false">
        Contribute to the atPlatform
      </button>
      <div class="collapse" id="section-c20ef24abeeca4e301dcb6590a9fa683">
        <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
          
            
              
              
              
              
              <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/contribute/atmosphere-pro/1-introduction/">Atmosphere Pro</a></li>
            
          
            
              
                
                <li class="my-1 ms-3">
                  <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#section-9cacfb761116331ea9cdd8841bd77804" aria-expanded="false">
                    Contribute to this site
                  </button>
                  <div class="collapse" id="section-9cacfb761116331ea9cdd8841bd77804">
                    <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                      
                        
                          
                          
                          
                          
                          <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/contribute/this-site/shortcodes/button/">Shortcodes Tutorial</a></li>
                        
                      
                        
                          
                            
                            <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/contribute/this-site/style-guide/">Style Guide</a></li>
                          
                        
                      
                    </ul>
                  </div>
                </li>
              
            
          
        </ul>
      </div>
    </li>
  
</ul>

        </span>
      </div>
    </div>

    <div class="flex-grow-1"></div>

    <button id="mode" class="btn py-2 order-md-1 text-body" type="button" aria-label="Toggle user interface mode">
      <span class="toggle-dark text-primary"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></span>
      <span class="toggle-light text-highlight"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></span>
    </button>
    <button class="btn btn-menu order-md-1 d-lg-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasDoks" aria-controls="offcanvasDoks" aria-label="Open main menu">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
    </button>
  </nav>
</header>

<nav class="doks-subnavbar py-2 sticky-lg-top" aria-label="Secondary navigation">
  <div class="container-fluid d-flex align-items-center">

    <form class="doks-search position-relative flex-grow-1 me-auto">
      <input id="search" class="form-control is-search" type="search" placeholder="Search docs..." aria-label="Search docs..." autocomplete="off">
      <div id="suggestions" class="shadow bg-white rounded d-none"></div>
    </form>

    </div>
</nav>


    <div class="wrap container-fluid" role="document">
      <div class="content">
        
	<div class="row flex-xl-nowrap">
		
		<div class="col-lg-5 col-xl-4 docs-sidebar d-none d-lg-block">
			<nav class="docs-links" aria-label="Main navigation">
				
<ul class="list-unstyled collapsible-sidebar">
  
    
    <li class="mb-1">
      <button class="btn btn-toggle default-text align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#section-e0c4332e8c13be976552a059f106354f" aria-expanded="false">
        Get Started
      </button>
      <div class="collapse" id="section-e0c4332e8c13be976552a059f106354f">
        <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/start/flutter/">Flutter</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/start/java/">Java</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/start/iot/">IoT</a></li>
              
            
          
        </ul>
      </div>
    </li>
  
    
    <li class="mb-1">
      <button class="btn btn-toggle default-text align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#section-130ddfce9c28453883ccfe2da8b6d5ac" aria-expanded="false">
        Tutorials
      </button>
      <div class="collapse" id="section-130ddfce9c28453883ccfe2da8b6d5ac">
        <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
          
            
              
              
              
              
              <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/tutorials/atmosphere-pro/1-introduction/">atmosphere pro</a></li>
            
          
            
              
              
              
              
              <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/tutorials/at-dude/_10_profile_screen/">atDude Tutorial</a></li>
            
          
            
              
              
              
              
              <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/tutorials/sshnp/1-prerequisites/">Ssh! No Ports</a></li>
            
          
            
              
                
                <li class="my-1 ms-3">
                  <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#section-5a5c507983026cf2af9f40acb713f707" aria-expanded="false">
                    at_demos
                  </button>
                  <div class="collapse" id="section-5a5c507983026cf2af9f40acb713f707">
                    <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                      
                    </ul>
                  </div>
                </li>
              
            
          
            
              
                
                <li class="my-1 ms-3">
                  <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#section-76633bb1ac6de866df853afb3570dcd5" aria-expanded="false">
                    dess
                  </button>
                  <div class="collapse" id="section-76633bb1ac6de866df853afb3570dcd5">
                    <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                      
                        
                          
                          
                          
                          
                          <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/tutorials/dess/aws/1-introduction/">Setup dess on AWS</a></li>
                        
                      
                        
                          
                          
                          
                          
                          <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/tutorials/dess/gcp/1-introduction/">Setup dess on GCP</a></li>
                        
                      
                        
                          
                          
                          
                          
                          <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/tutorials/dess/rpi/1-introduction/">Setup dess on a Raspberry Pi</a></li>
                        
                      
                    </ul>
                  </div>
                </li>
              
            
          
        </ul>
      </div>
    </li>
  
    
    <li class="mb-1">
      <button class="btn btn-toggle default-text align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#section-e0d05f991f966012c2faab6947c0f48e" aria-expanded="false">
        SDK Reference
      </button>
      <div class="collapse" id="section-e0d05f991f966012c2faab6947c0f48e">
        <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
          
            
              
              
              
              
              <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/sdk/flutter/introduction/">Flutter</a></li>
            
          
            
              
              
              
              
              <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/sdk/java/introduction/">Java</a></li>
            
          
        </ul>
      </div>
    </li>
  
    
    <li class="mb-1">
      <button class="btn btn-toggle default-text align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#section-f1cfbb26098a251a8c16653a09a31da9" aria-expanded="true">
        The atPlatform
      </button>
      <div class="collapse show" id="section-f1cfbb26098a251a8c16653a09a31da9">
        <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/atplatform/atplatformoverview/">Overview</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/atplatform/architecture/">Architecture</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded active" href="https://dev3.atsign.wtf/atplatform/specification/">Protocol Specification</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/atplatform/rootserver/">atDirectory</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/atplatform/secondaryserver/">atServer</a></li>
              
            
          
        </ul>
      </div>
    </li>
  
    
    <li class="mb-1">
      <button class="btn btn-toggle default-text align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#section-63d5049791d9d79d86e9a108b0a999ca" aria-expanded="false">
        Reference
      </button>
      <div class="collapse" id="section-63d5049791d9d79d86e9a108b0a999ca">
        <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/reference/atsign/">atSign</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/reference/pricing-and-costs/">Pricing / Costs</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/reference/encryption/">Encryption</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/reference/privacy/">Privacy</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/reference/polymorphism/">Polymorphism</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/reference/public-private-keys/">Public and Private Keys</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/reference/self-encryption-key/">Self-Encryption Key</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/reference/cram/">CRAM</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/reference/pkam/">PKAM</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/reference/namespace/">Namespace</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/reference/synchronization/">Synchronization</a></li>
              
            
          
            
              
                
                <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/reference/notification/">Notification</a></li>
              
            
          
        </ul>
      </div>
    </li>
  
    
    <li class="mb-1">
      <button class="btn btn-toggle default-text align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#section-c20ef24abeeca4e301dcb6590a9fa683" aria-expanded="false">
        Contribute to the atPlatform
      </button>
      <div class="collapse" id="section-c20ef24abeeca4e301dcb6590a9fa683">
        <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
          
            
              
              
              
              
              <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/contribute/atmosphere-pro/1-introduction/">Atmosphere Pro</a></li>
            
          
            
              
                
                <li class="my-1 ms-3">
                  <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#section-9cacfb761116331ea9cdd8841bd77804" aria-expanded="false">
                    Contribute to this site
                  </button>
                  <div class="collapse" id="section-9cacfb761116331ea9cdd8841bd77804">
                    <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                      
                        
                          
                          
                          
                          
                          <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/contribute/this-site/shortcodes/button/">Shortcodes Tutorial</a></li>
                        
                      
                        
                          
                            
                            <li><a class="docs-link rounded" href="https://dev3.atsign.wtf/contribute/this-site/style-guide/">Style Guide</a></li>
                          
                        
                      
                    </ul>
                  </div>
                </li>
              
            
          
        </ul>
      </div>
    </li>
  
</ul>

			</nav>
		</div>
		<nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation">
			<div class="page-links">
    <h3>On this page</h3>
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#introduction">Introduction</a></li>
        <li><a href="#atdirectory">atDirectory</a></li>
        <li><a href="#atserver">atServer</a>
          <ul>
            <li><a href="#1-key-store">1. Key Store</a></li>
            <li><a href="#2-commit-log">2. Commit Log</a></li>
            <li><a href="#3-access-log">3. Access Log</a></li>
            <li><a href="#4-notification-log">4. Notification Log</a></li>
          </ul>
        </li>
        <li><a href="#standard-keys">Standard Keys</a></li>
        <li><a href="#configuration-parameters">Configuration Parameters</a></li>
        <li><a href="#block-list">Block List</a></li>
        <li><a href="#verbs">Verbs</a>
          <ul>
            <li><a href="#the-from-verb">The <code>from</code> verb</a></li>
            <li><a href="#the-cram-verb">The <code>cram</code> verb</a></li>
            <li><a href="#the-pkam-verb">The <code>pkam</code> verb</a></li>
            <li><a href="#the-pol-verb">The <code>pol</code> verb</a></li>
            <li><a href="#the-scan-verb">The <code>scan</code> verb</a></li>
            <li><a href="#the-lookup-verb">The <code>lookup</code> verb</a></li>
            <li><a href="#the-plookup-verb">The <code>plookup</code> verb</a></li>
            <li><a href="#the-llookup-verb">The <code>llookup</code> verb</a></li>
            <li><a href="#the-update-verb">The <code>update</code> verb</a></li>
            <li><a href="#the-updatemeta-verb">The <code>update:meta</code> verb</a></li>
            <li><a href="#the-delete-verb">The <code>delete</code> verb</a></li>
            <li><a href="#the-stats-verb">The <code>stats</code> verb</a></li>
            <li><a href="#the-sync-verb">The <code>sync</code> verb</a></li>
            <li><a href="#the-notify-verb">The <code>notify</code> verb</a></li>
            <li><a href="#the-monitor-verb">The <code>monitor</code> verb</a></li>
          </ul>
        </li>
        <li><a href="#error-codes">Error Codes</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>

		</nav>
		<main class="docs-content col-lg-11 col-xl">
		
			<h2>Protocol Specification</h2>
			<p class="lead font-size-lg">This page gives an overview of how the internal of the atPlatform works.</p>
			<nav class="d-xl-none" aria-label="Quaternary navigation">
				<div class="page-links">
    <h3>On this page</h3>
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#introduction">Introduction</a></li>
        <li><a href="#atdirectory">atDirectory</a></li>
        <li><a href="#atserver">atServer</a>
          <ul>
            <li><a href="#1-key-store">1. Key Store</a></li>
            <li><a href="#2-commit-log">2. Commit Log</a></li>
            <li><a href="#3-access-log">3. Access Log</a></li>
            <li><a href="#4-notification-log">4. Notification Log</a></li>
          </ul>
        </li>
        <li><a href="#standard-keys">Standard Keys</a></li>
        <li><a href="#configuration-parameters">Configuration Parameters</a></li>
        <li><a href="#block-list">Block List</a></li>
        <li><a href="#verbs">Verbs</a>
          <ul>
            <li><a href="#the-from-verb">The <code>from</code> verb</a></li>
            <li><a href="#the-cram-verb">The <code>cram</code> verb</a></li>
            <li><a href="#the-pkam-verb">The <code>pkam</code> verb</a></li>
            <li><a href="#the-pol-verb">The <code>pol</code> verb</a></li>
            <li><a href="#the-scan-verb">The <code>scan</code> verb</a></li>
            <li><a href="#the-lookup-verb">The <code>lookup</code> verb</a></li>
            <li><a href="#the-plookup-verb">The <code>plookup</code> verb</a></li>
            <li><a href="#the-llookup-verb">The <code>llookup</code> verb</a></li>
            <li><a href="#the-update-verb">The <code>update</code> verb</a></li>
            <li><a href="#the-updatemeta-verb">The <code>update:meta</code> verb</a></li>
            <li><a href="#the-delete-verb">The <code>delete</code> verb</a></li>
            <li><a href="#the-stats-verb">The <code>stats</code> verb</a></li>
            <li><a href="#the-sync-verb">The <code>sync</code> verb</a></li>
            <li><a href="#the-notify-verb">The <code>notify</code> verb</a></li>
            <li><a href="#the-monitor-verb">The <code>monitor</code> verb</a></li>
          </ul>
        </li>
        <li><a href="#error-codes">Error Codes</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>

			</nav>
			<h2 id="introduction">Introduction <a href="#introduction" class="anchor" aria-hidden="true">#</a></h2>
<p>The atProtocol is the underlying protocol that the atPlatform implements. It is a simple internet protocol for interacting with the atDirectory and atServer. The atPlatform builds on top of the atProtocol by taking full advantage of the features of the atProtocol.</p>
<p>See our <a href="https://github.com/atsign-foundation/at_protocol/blob/trunk/specification/at_protocol_specification.md">Protocol Specification</a> on our GitHub page under our <a href="https://github.com/atsign-foundation/at_protocol">at_protocol</a> repository.</p>
<p>If you see a typo, mistake, or want to suggest a feature, please see our <a href="https://dev3.atsign.wtf/start/other/#contributing-to-the-developer-site">contributing guidelines</a>. All contributions are welcome.</p>
<h2 id="atdirectory">atDirectory <a href="#atdirectory" class="anchor" aria-hidden="true">#</a></h2>
<p>The atDirectory provides a lookup of where an atServer for an atSign is running. This is similar to a DNS server.</p>
<p>When asking an atDirectory for the lookup of a particular atSign the atDirectory should respond with a null if the name does not exist and if the name exists the DNS name or address of the atServer and the IP port number for that atSign should be returned.</p>
<p>Response:</p>
<p><code>&lt;host&gt;:&lt;port&gt;</code></p>
<p>The atDirectory only has one verb - <code>@exit</code> and all other inputs are considered to be lookup requests.</p>
<h2 id="atserver">atServer <a href="#atserver" class="anchor" aria-hidden="true">#</a></h2>
<p>An atServer is where an atSign user&rsquo;s personal data should be stored. One interacts with an atServer using the verbs exposed by the protocol.</p>
<p>An atServer should have 4 major sub components:</p>
<ol>
<li>Key Store</li>
<li>Commit Log</li>
<li>Access Log</li>
<li>Notification Log</li>
</ol>
<p>Verbs described in the document should be used to create, update, delete, and retrieve information from the above sub components.</p>
<h3 id="1-key-store">1. Key Store <a href="#1-key-store" class="anchor" aria-hidden="true">#</a></h3>
<p>Key store is a place where user data in an atServer should be saved as key and value pairs. Apart from the value, an atSign owner should be able to add certain metadata for a key.</p>
<h4 id="key">Key <a href="#key" class="anchor" aria-hidden="true">#</a></h4>
<p>A key in the atProtocol can be formed by using any alphanumeric and special characters (UTF-8) excluding &ldquo;@&rdquo;, &ldquo;:&rdquo; and a white space (&quot; &ldquo;). A key in an atServer can be any of the following 5 types:</p>
<ol>
<li>Public Key</li>
</ol>
<ul>
<li>A public key is a key which can be looked up by any atSign owner.</li>
<li>A public key should be part of the <em>scan</em> verb result.</li>
<li>Format of the public key should be <code>public::&lt;@sign&gt;</code>.</li>
</ul>
<p>Example:</p>
<p><code>public:location@alice</code></p>
<blockquote>
<p>The owner of the atServer should be allowed to update or delete the value of a public key.</p>
</blockquote>
<ol start="2">
<li>Private Key</li>
</ol>
<ul>
<li>A private key is a key which cannot be looked up by any atSign owner other than the one who created it.</li>
<li>A private key should not be returned in a <em>scan</em> verb result.</li>
<li>Format of the private key should be <code>privatekey::&lt;@sign&gt;</code>.</li>
</ul>
<p>Example:</p>
<p><code>privatekey:pk1@alice</code></p>
<blockquote>
<p>The owner of the atServer should be allowed to update or delete the value of a private key.</p>
</blockquote>
<ol start="3">
<li>User key</li>
</ol>
<ul>
<li>A user key can only be looked up by an atSign owner with whom the data has been shared.</li>
<li>A user key should be part of the <em>scan</em> verb result only for the user who created it and the specific user it has been shared with.</li>
<li>Format of the key shared with someone else should be <code>&lt;Shared with atSign&gt;::&lt;Created by atSign&gt;</code>.</li>
</ul>
<p>Example:</p>
<p><code>@bob:phone@alice</code></p>
<blockquote>
<p>Note: Above Key should be part of scan verb result only for @alice and @bob</p>
</blockquote>
<blockquote>
<p>The owner of the atServer should be allowed to update or delete the value of a user key.</p>
</blockquote>
<ol start="4">
<li>Internal Key</li>
</ol>
<ul>
<li>Internal keys start with an underscore(_) and are not displayed in scan results. Internal keys can be looked up only by the owner of the atServer.</li>
</ul>
<ol start="5">
<li>Cached Key
&lt;! &mdash;
TODO: Do we continue to use &ldquo;atSign user or atSign owner? Especially with our &ldquo;Person not user rule.</li>
</ol>
<blockquote>
</blockquote>
<ul>
<li>A cached key is a key that was originally created by another atSign owner but is now cached on the atServer of another user&rsquo;s atSign as they were given permission to cache it.</li>
<li>A cached key should be listed in the <em>scan</em> verb result for the atSign user who cached it.</li>
<li>Format of the key shared with someone else should be <code>cached:&lt;Shared with atSign&gt;::&lt;Created by atSign&gt;</code>.</li>
</ul>
<p>Example:</p>
<p><code>cached:@bob:phone@alice</code></p>
<blockquote>
<p>The person who has cached the key should not be allowed to update the cached key.</p>
</blockquote>
<blockquote>
<p>An atSign user who has created and shared the key should be allowed to update a cached key, and if the &ldquo;autoNotify&rdquo; config parameter is set to true, the updated value should be notified (please refer to the <code>notify</code> verb) and the cached key updated with the new value.</p>
</blockquote>
<blockquote>
<p>If the user who originally shared the keys set the CCD (Cascade delete) to true, the cached key will be deleted when the original key is deleted.</p>
</blockquote>
<h4 id="value">Value <a href="#value" class="anchor" aria-hidden="true">#</a></h4>
<p>Text or binary values can be saved in an atServer. The size of the value saved in an atServer is bound by the config parameter &ldquo;maxBufferSize&rdquo;.</p>
<blockquote>
<p>A user should be made aware of this limitation by using the <code>stats</code> verb.</p>
</blockquote>
<blockquote>
<p>If a binary value is being saved on an atServer, the &ldquo;isBinary&rdquo; attribute on the metadata should be set to true by the convention.</p>
</blockquote>
<ol>
<li>Reference Value</li>
</ol>
<p>An atServer should support referencing another key&rsquo;s value.</p>
<p>A reference value should be in the format &ldquo;atsign://&rdquo;.</p>
<p>For example, &lsquo;phone@bob(key)&rsquo; is 1234 (value). Now another key called altPhone@bob can refer to phone@bob by referencing it as altPhone@bob == atsign://phone@bob.</p>
<p>When the user does a lookup on the key that contains a reference, the atServer should return a fully resolved value.</p>
<ol start="2">
<li>Metadata</li>
</ol>
<p>Metadata of a key should describe the following properties of the value being inserted.</p>
<table>
<thead>
<tr>
<th>Meta Attribute</th>
<th>Auto create?</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>createdOn</td>
<td>Yes</td>
<td>Date and time when the key has been created.</td>
</tr>
<tr>
<td>createdBy</td>
<td>Yes</td>
<td>atSign that has created the key</td>
</tr>
<tr>
<td>updatedOn</td>
<td>Yes</td>
<td>Date and time when the key has been last updated</td>
</tr>
<tr>
<td>sharedWith</td>
<td>No</td>
<td>atSign of the user with whom the key has been shared. Can be null if not shared with anyone.</td>
</tr>
<tr>
<td>ttl</td>
<td>No</td>
<td>Time to live in milliseconds.</td>
</tr>
<tr>
<td>expiresOn</td>
<td>Yes</td>
<td>A Date and Time derived from the ttl (now + ttl). A Key should be auto deleted once it expires.</td>
</tr>
<tr>
<td>ttb</td>
<td>No</td>
<td>Time to birth in milliseconds.</td>
</tr>
<tr>
<td>availableFrom</td>
<td>Yes</td>
<td>A Date and Time derived from the ttl (now + ttl). A Key should be only available after availableFrom</td>
</tr>
<tr>
<td>isCached</td>
<td>No</td>
<td>True if the key is cached</td>
</tr>
<tr>
<td>ttr</td>
<td>No</td>
<td>Time in milliseconds after which the cached key needs to be refreshed. ttr of -1 indicates that the key can be cached forever. ttr of 0 indicates do not refresh. ttr of &gt; 0 will refresh the key. ttr of null indicates the key is impossible to cache (which has the same effect as a ttr of 0).</td>
</tr>
<tr>
<td>refreshAt</td>
<td>No</td>
<td>A Date and Time derived from the ttr. The time at which the key gets refreshed.</td>
</tr>
<tr>
<td>ccd</td>
<td>No</td>
<td>Indicates if a cached key needs to be deleted when the atSign user who has originally shared it deletes it.</td>
</tr>
<tr>
<td>isBinary</td>
<td>No</td>
<td>True if the value is a binary value.</td>
</tr>
<tr>
<td>isEncrypted</td>
<td>No</td>
<td>True if the value is encrypted.</td>
</tr>
</tbody>
</table>
<h3 id="2-commit-log">2. Commit Log <a href="#2-commit-log" class="anchor" aria-hidden="true">#</a></h3>
<p>An atServer should record any <code>create</code>, <code>update</code>, and <code>delete</code> operations in a commit log. The Commit Log should record these operations with a unique commit id so that users of the atServer can lookup operations that happened on or after a given commit id.</p>
<p>An atServer should provide a way to compact the Commit Log based on time and size.</p>
<h3 id="3-access-log">3. Access Log <a href="#3-access-log" class="anchor" aria-hidden="true">#</a></h3>
<p>An atServer should record the following user actions: user login, user authentication, and lookup. The Access Log should record these operations so that users of the atServer can retrieve various statistics such as the most visited atSign or most visited keys.</p>
<p>An atServer should provide a way to compact the Access Log based on time and size.</p>
<h3 id="4-notification-log">4. Notification Log <a href="#4-notification-log" class="anchor" aria-hidden="true">#</a></h3>
<p>An atServer should record any notifications that have been received and sent. Please check the <code>notify</code> verb specification for details on how a notification should be sent.</p>
<p>An atServer should provide a way to compact the Notification Log based on time and size.</p>
<h2 id="standard-keys">Standard Keys <a href="#standard-keys" class="anchor" aria-hidden="true">#</a></h2>
<p>An atServer should have the following standard keys:</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>public:publickey@</td>
<td>Public key used by other atSigns for encryption.</td>
</tr>
<tr>
<td>public:signing_publickey@</td>
<td>Public key used on a pol handler to a verify a signed challenge.</td>
</tr>
<tr>
<td>@signing_privatekey@</td>
<td>Private key used to sign a challenge on a pol request.</td>
</tr>
<tr>
<td>:shared_key@</td>
<td>Symmetric key used to encrypt/decrypt self atSign data.</td>
</tr>
</tbody>
</table>
<h2 id="configuration-parameters">Configuration Parameters <a href="#configuration-parameters" class="anchor" aria-hidden="true">#</a></h2>
<p>An atserver should honor the following configuration parameters.</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Valid Values</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>autoNotify</td>
<td>true/false</td>
<td>If set to true, an atServer should automatically notify another atSign user when a key has been shared with them. Please refer to the <code>notify</code> verb spec for details.</td>
</tr>
<tr>
<td>bufferLimit</td>
<td>Number of bytes</td>
<td>Maximum size of a value for a key that can be transferred to an atServer</td>
</tr>
<tr>
<td>inbound_max_limit</td>
<td>An Integer</td>
<td>Maximum number of inbound connections that an atServer can accept</td>
</tr>
<tr>
<td>outbound_max_limit</td>
<td>An Integer</td>
<td>Maximum number of outbound connections that an atServer can make to another atServer</td>
</tr>
<tr>
<td>inbound_idle_time_millis</td>
<td>Time in milliseconds</td>
<td>Maximum time the inbound connection can active</td>
</tr>
<tr>
<td>outbound_idle_time_millis</td>
<td>Time in milliseconds</td>
<td>Maximum time the outbound connection can be active.</td>
</tr>
</tbody>
</table>
<h2 id="block-list">Block List <a href="#block-list" class="anchor" aria-hidden="true">#</a></h2>
<p>A user of the atServer should be able to decide who is allowed to connect to their atServer. The <code>config</code> verb should be used to configure this. Once added, an atServer should honor the list at the time of accepting new connections from an atSign user using the <code>from</code> verb.</p>
<h2 id="verbs">Verbs <a href="#verbs" class="anchor" aria-hidden="true">#</a></h2>
<p>Verbs are commands you can execute on an atServer. Each verb interacts with the atServer in a different way. Some are for authentication, some are for data retrieval and some are for data manipulation. See the table below for more insight on which verb to use for what purpose.</p>
<table>
<thead>
<tr>
<th>Verb</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>from</code></td>
<td>Authentication</td>
</tr>
<tr>
<td><code>cram</code></td>
<td>Client Authentication</td>
</tr>
<tr>
<td><code>pkam</code></td>
<td>Client Authentication</td>
</tr>
<tr>
<td><code>pol</code></td>
<td>atServer Authentication</td>
</tr>
<tr>
<td><code>scan</code></td>
<td>Data retrieval</td>
</tr>
<tr>
<td><code>lookup</code></td>
<td>Data retrieval</td>
</tr>
<tr>
<td><code>plookup</code></td>
<td>Data retrieval</td>
</tr>
<tr>
<td><code>llookup</code></td>
<td>Data retrieval</td>
</tr>
<tr>
<td><code>update</code></td>
<td>Data manipulation</td>
</tr>
<tr>
<td><code>update:meta</code></td>
<td>Data manipulation</td>
</tr>
<tr>
<td><code>delete</code></td>
<td>Data manipulation</td>
</tr>
<tr>
<td><code>stats</code></td>
<td>Misc</td>
</tr>
<tr>
<td><code>sync</code></td>
<td>Data synchronization</td>
</tr>
<tr>
<td><code>notify</code></td>
<td>Notifications</td>
</tr>
<tr>
<td><code>monitor</code></td>
<td>Notifications</td>
</tr>
</tbody>
</table>
<h3 id="the-from-verb">The <code>from</code> verb <a href="#the-from-verb" class="anchor" aria-hidden="true">#</a></h3>
<p><strong>Synopsis:</strong></p>
<p>The <code>from</code> verb is used to tell an atServer whom you claim to be.</p>
<p>Following regex represents the syntax of the <code>from</code> verb:</p>
<p><code>r'^from:(?&lt;@sign&gt;@?[^@\s]+$)'</code></p>
<p><strong>Example</strong>:</p>
<p>Telling the atServer that you are claiming to be <code>@bob</code>.</p>
<p><code>from:@bob</code></p>
<p><strong>Response</strong>:</p>
<p>If the user who is trying to connect is the owner of the atServer, then the <code>from</code> verb should respond with the following response.</p>
<p><code>data:&lt;sessionId@sign:uuid&gt;</code></p>
<p>If the user who is trying to connect is not the owner of the atServer, then the <code>from</code> verb should respond with the following response.</p>
<p><code>proof:&lt;sessionId&gt;@&lt;@sign&gt;:&lt;UUID&gt;</code></p>
<p>If the user is not allowed to connect to the atServer, then it should respond back with the following error and close the connection to the server.</p>
<p><code>error:AT0013-Connection Exception</code></p>
<p><strong>Description:</strong></p>
<p>The <code>from</code> verb is used to tell the atServer what atSign you claim to be. With the <code>from</code> verb, one can connect to one&rsquo;s own atServer or someone else&rsquo;s atServer. In both cases, the atServer responds back with a challenge to prove that you are who you claim to be. This is part of the authentication mechanism of the atProtocol.</p>
<p>This authentication mechanism varies based on whether you are connecting to your own atServer (cram/pkam) or someone else&rsquo;s atServer (pol).</p>
<p><strong>Options:</strong></p>
<p><code>&lt;atSign&gt;</code> Required: Yes. atSign  with which you are connecting to an atServer</p>
<h3 id="the-cram-verb">The <code>cram</code> verb <a href="#the-cram-verb" class="anchor" aria-hidden="true">#</a></h3>
<p><strong>Synopsis:</strong></p>
<p>The <code>cram</code> verb is used to bootstrap authenticate one&rsquo;s own client as the owner of an atServer. It is intended to be used once until a set of PKI keys are cut on the owner&rsquo;s mobile device and from then on we use the <code>pkam</code> verb.</p>
<p>The following regex represents the syntax of the <code>cram</code> verb:</p>
<p><code>r'^cram:(?&lt;digest&gt;.+$)'</code></p>
<p><strong>Example:</strong></p>
<p><code>cram:&lt;digest&gt;</code></p>
<p><strong>Response:</strong></p>
<p>If the user gets the challenge right, the prompt should change to the atSign of the user.</p>
<p><code>&lt;atSign&gt;@</code></p>
<p>If the user gets the cram authentication wrong, then it should respond back with the following error and close the connection to the server.</p>
<p><code>error:AT0401-Client authentication failed</code></p>
<p><strong>Description:</strong></p>
<p>The <code>cram</code> verb follows the <code>from</code> verb. As an owner of the atServer, you should be able to take the challenge thrown by the <code>from</code> verb and encrypt using the shared key that the server has been bound with. Upon receiving the <code>cram</code> verb along with the digest, the server decrypts the digest using the shared key and matches it with the challenge. If they are the same, then you can connect to the atServer and change the prompt to your atSign.</p>
<p><strong>Options:</strong></p>
<p><code>&lt;digest&gt;</code> Required: Yes. Description: Encrypted challenge</p>
<h3 id="the-pkam-verb">The <code>pkam</code> verb <a href="#the-pkam-verb" class="anchor" aria-hidden="true">#</a></h3>
<p><strong>Synopsis:</strong></p>
<p>The <code>pkam</code> verb is used to authenticate one&rsquo;s own client as an owner of an atServer using a PKI style authentication.</p>
<p>Following regex represents the syntax of the <code>pkam</code> verb:</p>
<p><code>^pkam:(?&lt;signature&gt;.+$)</code></p>
<p><strong>Example:</strong></p>
<p><code>pkam:&lt;digest&gt;</code></p>
<p><strong>Response:</strong></p>
<p>If the user gets the challenge right, the prompt should change to the atSign of the user.</p>
<p><code>&lt;@sign&gt;@</code></p>
<p>If the user gets the pkam authentication wrong, then it should respond back with the following error and close the connection to the server.</p>
<p><code>error:AT0401-Client authentication failed</code></p>
<p><strong>Description:</strong></p>
<p>The <code>pkam</code> verb follows the <code>from</code> verb. As an owner of the atServer, you should be able to take the challenge thrown by the <code>from</code> verb and encrypt using the private key of the RSA key pair with what the server has been bound with. Upon receiving the <code>cram</code> verb along with the digest, the server decrypts the digest using the public key and matches it with the challenge. If they are the same then the atServer lets you connect and changes the prompt to your atSign.</p>
<p><strong>Options:</strong></p>
<p><code>&lt;digest&gt;</code> Required: Yes. Description: Encrypted challenge</p>
<h3 id="the-pol-verb">The <code>pol</code> verb <a href="#the-pol-verb" class="anchor" aria-hidden="true">#</a></h3>
<p><strong>Synopsis</strong>:</p>
<p>The <code>pol</code> verb is part of the <code>pkam</code> process to authenticate oneself (as an atServer) while connecting to someone else&rsquo;s atServer. The term &lsquo;pol&rsquo; means &lsquo;proof of life&rsquo; as it provides a near realtime assurance that the requestor is who it claims to be.</p>
<p>Following regex represents the syntax of the <code>pol</code> verb:</p>
<p><code>r'^pol$'</code></p>
<p><strong>Example:</strong></p>
<p><code>pol</code></p>
<p><strong>Response:</strong>:</p>
<p>If the atServer (you) gets the challenge right the prompt should change to the atSign of the user.</p>
<p><code>&lt;@sign&gt;@</code></p>
<p>If the atServer (you) gets the cram authentication wrong, then it should respond back with the following error and close the connection to the server.</p>
<p><code>error:AT0401-Client authentication failed</code></p>
<p><strong>Description:</strong></p>
<p>The <code>pol</code> verb follows the <code>from</code> verb. &lsquo;pol&rsquo; indicates to another atServer that the atServer (you) who is trying to connect is ready to authenticate. For example, if @bob is trying to connect to @alice, @bob would take the key and value from the proof response of the verb and create a public key and value which then can be looked up by @alice. After @alice looks up @bob&rsquo;s atServer, @alice&rsquo;s atServer should change the prompt to @bob.</p>
<p><strong>Options:</strong></p>
<p>NA</p>
<h3 id="the-scan-verb">The <code>scan</code> verb <a href="#the-scan-verb" class="anchor" aria-hidden="true">#</a></h3>
<p><strong>Synopsis:</strong></p>
<p>The scan verb is used to see the keys in an atSign&rsquo;s atServer.
Following regex represents the syntax of the <code>scan</code> verb:
<code>r'^scan$|scan(:showhidden:(?&lt;showhidden&gt;true|false))?(:(?&lt;forAtSign&gt;@[^:@\s]+))?(:page:(?&lt;page&gt;\d+))?( (?&lt;regex&gt;\S+))?$'</code></p>
<p><strong>Example:</strong></p>
<p>View all keys in the atServer excluding hidden</p>
<p><code>scan</code></p>
<p>View all keys in the atServer including hidden</p>
<p><code>scan:showhidden:true</code></p>
<p>View all keys in the atServer filtered by a regex</p>
<p><code>scan &lt;regex&gt;</code></p>
<p>View all keys in the atServer including hidden and filtered by a regex</p>
<p><code>scan:showhidden:true &lt;regex&gt;</code></p>
<p><strong>Response:</strong></p>
<p>The atServer should return the keys within the atServer if the scan verb executed successfully. The atServer will respond accordingly to whether the atSign is authenticated or not.
<code>data:[&lt;keys&gt;]</code></p>
<h3 id="the-lookup-verb">The <code>lookup</code> verb <a href="#the-lookup-verb" class="anchor" aria-hidden="true">#</a></h3>
<p><strong>Synopsis</strong>:</p>
<p>The <code>lookup</code> verb should be used to lookup the value shared by another atSign user.</p>
<p>The following is the regex of the <code>lookup</code> verb:</p>
<p><code>lookup:((?&lt;operation&gt;meta|all):)?(?&lt;atKey&gt;(?:[^:]).+)@(?&lt;@sign&gt;[^@\s]+)$</code></p>
<p><strong>Example:</strong></p>
<p>Look up the value of the key <code>@&lt;you&gt;:phone@alice</code> (the key is created and shared by @alice and lives on their atServer where the key is intentionally shared with you).</p>
<p><code>lookup:phone@alice</code></p>
<p>Look up the metadata of the key <code>@&lt;you&gt;:phone@alice</code> (key shared by @alice and shared with you).</p>
<p><code>lookup:meta:phone@alice</code></p>
<p>Look up both the value and the metadata of the key <code>@&lt;you&gt;:phone@alice</code> (key shared by @alice and shared with you).</p>
<p><code>lookup:all:phone@alice</code></p>
<p><strong>Response</strong>:</p>
<p>If the operation is not specified the atServer should just respond back with the value saved by the user as is.</p>
<p><code>data:&lt;value&gt;</code></p>
<p>If the operation is to lookup the metadata only then the result should be wrapped in a JSON in the following format:</p>
<p><code>data:&lt;Metadata in a JSON&gt;</code></p>
<p><strong>Example</strong>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="err">data:</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;createdBy&#34;</span><span class="p">:</span><span class="s2">&#34;@bob&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;updatedBy&#34;</span><span class="p">:</span><span class="s2">&#34;@bob&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;createdAt&#34;</span><span class="p">:</span><span class="s2">&#34;2020-10-21 09:46:48.982Z&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;updatedAt&#34;</span><span class="p">:</span><span class="s2">&#34;2020-10-21 09:46:48.982Z&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;availableAt&#34;</span><span class="p">:</span><span class="s2">&#34;null&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;expiresAt&#34;</span><span class="p">:</span><span class="s2">&#34;null&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;refreshAt&#34;</span><span class="p">:</span><span class="s2">&#34;2020-10-21 09:46:58.982Z&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;status&#34;</span><span class="p">:</span><span class="s2">&#34;active&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;version&#34;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;ttl&#34;</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;ttb&#34;</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;ttr&#34;</span><span class="p">:</span><span class="mi">10000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;ccd&#34;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;isBinary&#34;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;isEncrypted&#34;</span><span class="p">:</span><span class="kc">false</span>
</span></span><span class="line"><span class="cl"> <span class="p">}</span>
</span></span></code></pre></div><p>If the operation is to lookup the metadata and the data together, then the result should be wrapped in a JSON in the following format:</p>
<p><code>data:&lt;Value and Metadata in a JSON&gt;</code></p>
<p><strong>Example:</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="err">data:</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nt">&#34;key&#34;</span><span class="p">:</span><span class="s2">&#34;@alice:country@bob&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="nt">&#34;data&#34;</span><span class="p">:</span><span class="s2">&#34;USA&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="nt">&#34;metaData&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">	 <span class="nt">&#34;createdBy&#34;</span><span class="p">:</span><span class="s2">&#34;@bob&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">       <span class="nt">&#34;updatedBy&#34;</span><span class="p">:</span><span class="s2">&#34;@bob&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">       <span class="nt">&#34;createdAt&#34;</span><span class="p">:</span><span class="s2">&#34;2020-10-21 09:46:48.982Z&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">       <span class="nt">&#34;updatedAt&#34;</span><span class="p">:</span><span class="s2">&#34;2020-10-21 09:46:48.982Z&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">       <span class="nt">&#34;availableAt&#34;</span><span class="p">:</span><span class="s2">&#34;null&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">       <span class="nt">&#34;expiresAt&#34;</span><span class="p">:</span><span class="s2">&#34;null&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">       <span class="nt">&#34;refreshAt&#34;</span><span class="p">:</span><span class="s2">&#34;2020-10-21 09:46:58.982Z&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">       <span class="nt">&#34;status&#34;</span><span class="p">:</span><span class="s2">&#34;active&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">       <span class="nt">&#34;version&#34;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">       <span class="nt">&#34;ttl&#34;</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">       <span class="nt">&#34;ttb&#34;</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">       <span class="nt">&#34;ttr&#34;</span><span class="p">:</span><span class="mi">10000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">       <span class="nt">&#34;ccd&#34;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">       <span class="nt">&#34;isBinary&#34;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">       <span class="nt">&#34;isEncrypted&#34;</span><span class="p">:</span><span class="kc">false</span>
</span></span><span class="line"><span class="cl">     <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>If the other atServer on which the lookup needs to be performed is down then the atServer should return the following error and keep the connection alive.</p>
<p><code>error:AT0007-atServer not found.</code></p>
<p>If the lookup command is not valid, then the atServer should return the following error and close the connection:</p>
<p><code>error:AT0003-Invalid Syntax</code></p>
<p>For whatever reasons, If the handshake with another atServer fails, then the atServer should return the following error:</p>
<p><code>data:AT0008-Handshake failure</code></p>
<p><strong>Description:</strong></p>
<p>The <code>lookup</code> verb should be used to fetch the value of the key shared by another atSign user. If there is a public and user key with the same name then the result should be based on whether the user is trying to lookup is authenticated or not. If the user is authenticated then the user key has to be returned, otherwise the public key has to be returned.</p>
<h3 id="the-plookup-verb">The <code>plookup</code> verb <a href="#the-plookup-verb" class="anchor" aria-hidden="true">#</a></h3>
<p><strong>Synopsis:</strong></p>
<p>The <code>plookup</code> verb enables to lookup the value of the public key shared by another atSign user.</p>
<p>Following is the regex of the <code>plookup</code> verb:</p>
<p><code>^plookup:((?&lt;operation&gt;meta|all):)?(?&lt;atKey&gt;[^@\s]+)@(?&lt;@sign&gt;[^@\s]+)$</code></p>
<p><strong>Example:</strong></p>
<p>Look up the value of the key <code>public:publickey@alice</code> (the key is created and shared by @alice and lives on their atServer where the key is public).</p>
<p><code>plookup:publickey@alice</code></p>
<p>Look up the metadata of the public key</p>
<p><code>plookup:meta:publickey@alice</code></p>
<p>Look up both the value and the metadata of the public key</p>
<p><code>plookup:all:publickey@alice</code></p>
<p>Look up the value and metadata of the public key while bypassing the cache (i.e. the value will be fetched directly from the atServer instead of first checking for a cached key on your secondary).</p>
<p><code>plookup:bypassCache:true:all:publickey@alice</code></p>
<p><strong>Response:</strong></p>
<p>The atServer should return the value or metadata or the value and metadata together based on the option specified.</p>
<p>The response structure should be exactly the same as the <code>lookup</code> verb.</p>
<p>If the other atServer on which the <code>lookup</code> needs to be performed is not available, then the atServer should return the following error and keep the connection alive.</p>
<p><code>error:AT0007-atServer not found.</code></p>
<p>If the <code>lookup</code> command is not valid, then the atServer should return the following error and close the connection:</p>
<p><code>error:AT0003-Invalid Syntax</code></p>
<h3 id="the-llookup-verb">The <code>llookup</code> verb <a href="#the-llookup-verb" class="anchor" aria-hidden="true">#</a></h3>
<p><strong>Synopsis:</strong></p>
<p>The <code>llookup</code> verb should be used to look up one&rsquo;s own atServer and this should return the value as is (i.e. without any resolution).</p>
<p>The following is the regex of the <code>llookup</code> verb:</p>
<p><code>^llookup:((?&lt;operation&gt;meta|all):)?(?:cached:)?((?:public:)|(@(?&lt;for@sign&gt;[^@:\s]-):))?(?&lt;atKey&gt;[^:]((?!:{2})[^@])+)@(?&lt;@sign&gt;[^@\s]+)$</code></p>
<p><strong>Example:</strong></p>
<p>Lookup the value of a public key that lives on your atServer</p>
<p><code>llookup:public:publickey@&lt;you&gt;</code></p>
<p>Lookup both the value and the metadata of a self key that lives on your atServer</p>
<p><code>llookup:all:phone@&lt;you&gt;</code></p>
<p>Lookup both the value and the metadata of a shared key (that is shared with @alice and created by @<you>)</p>
<p><code>llookup:all:@alice:phone@&lt;you&gt;</code></p>
<p><strong>Response:</strong></p>
<p>The atServer should return the value or metadata or the value and metadata together based on the option specified.</p>
<p>The response structure should be exactly the same as the <code>lookup</code> verb.</p>
<p>If the other atServer on which the lookup needs to be performed is down then the atServer should return the following error and keep the connection alive.</p>
<p><code>error:AT0007-atServer not found.</code></p>
<p>If the lookup command is not valid, then the atServer should return the following error and close the connection:</p>
<p><code>error:AT0003-Invalid Syntax</code></p>
<p><strong>Description:</strong></p>
<p>The <code>llookup</code> verb should be used to fetch the value of the key in the owner&rsquo;s atServer store as is without resolving it. For example if a key contains a reference as a value, the <code>lookup</code> verb should resolve it to a value whereas <code>llookup</code> should return the value as is.</p>
<p><strong>Example:</strong></p>
<p>If <code>phone@bob</code> is &ldquo;1234&rdquo; and <code>altphone@bob</code> is &ldquo;atsign://phone@bob&rdquo;, then <code>lookup</code> of <code>altphone@bob</code> should return &ldquo;1234&rdquo; where as <code>llookup</code> of <code>altphone@bob</code> should return &ldquo;atsign://phone@bob&rdquo;.</p>
<h3 id="the-update-verb">The <code>update</code> verb <a href="#the-update-verb" class="anchor" aria-hidden="true">#</a></h3>
<p><strong>Synopsis:</strong></p>
<p>The <code>update</code> verb is used to insert key/value pairs into a Key Store. An update can only be run by the owner of an atServer on his/her own atServer.</p>
<p>Following regex represents the syntax of the <code>update</code> verb:</p>
<p><code>r'^update:(?:ttl:(?&lt;ttl&gt;\d+):)?(?:ttb:(?&lt;ttb&gt;\d+):)?(?:ttr:(?&lt;ttr&gt;(-?)\d+):)?(ccd:(?&lt;ccd&gt;true|false):)?((?:public:)|(@(?&lt;for@sign&gt;[^@:\s]-):))?(?&lt;atKey&gt;[^:@]((?!:{2})[^@])+)(?:@(?&lt;@sign&gt;[^@\s]-))? (?&lt;value&gt;.+$)'</code></p>
<p><strong>Example:</strong></p>
<p>Put a key/value pair into the atServer with key <code>location@bob</code> and value <code>bob's location value</code>.
This operation will create a new key if it does not already exist. If it already exists, it will overwrite the existing value.</p>
<p><code>update:location@bob bob's location value</code></p>
<p>Put a key/value pair into the atServer with key <code>location@bob</code> and value <code>bob's location value but key expires in 10 minutes</code>. The time to live of this key is 10 minutes.</p>
<p><code>update:ttl:600000:location@bob bob's location value but key expires in 10 minutes</code></p>
<p>Put a shared key/value pair into the atServer with key <code>@alice:phone@bob</code> (shared with @alice and shared by @bob) with value <code>bob's phone number shared to @alice</code>.</p>
<p><code>update:@alice:phone@bob bob's phone number shared to @alice</code></p>
<p><strong>Response:</strong></p>
<p>The atServer should return the commit id from Commit Log if the update is successful.</p>
<p><code>data:&lt;CommitId&gt;</code></p>
<p>If the user provides the invalid update command, then it should respond with the following error and close the connection to the server</p>
<p><code>error:AT0003-Invalid Syntax</code></p>
<p><strong>Description:</strong></p>
<p>The <code>update</code> verb should be used to perform create/update operations on the atServer. The <code>update</code> verb requires the owner of the atServer to authenticate himself/herself to the atServer using <code>from</code> and <code>cram</code> verbs.</p>
<p>If a key has been created for another atSign user, the atServer should honor &ldquo;autoNotify&rdquo; configuration parameter.</p>
<p><strong>Options:</strong></p>
<p><code>&lt;ttl&gt;</code> Required: No. Description: Time to live in milliseconds.</p>
<p><code>&lt;ttb&gt;</code> Required: No. Description: Time to birth in milliseconds.</p>
<p><code>&lt;ttr&gt;</code> Required: No. Description: Time to refresh in milliseconds.</p>
<blockquote>
<p>-1 is a valid value which indicates that the user with whom the key has been shared can keep it forever and the value for this key won&rsquo;t change forever.</p>
</blockquote>
<p><code>&lt;ccd&gt;</code> Required: No. Description: A value of &ldquo;true&rdquo; indicates that the cached key needs to be deleted when the atSign user who has originally shared it deletes it.</p>
<p><code>&lt;for@sign&gt;</code> Required: Yes, (Not required when the key is a public key). Description: atSign of the user with whom the key has been shared.</p>
<p><code>&lt;@sign&gt;</code> Required: Yes. Description: atSign of the owner.</p>
<p><code>&lt;value&gt;</code> Required: Yes. Description: Value for the key.</p>
<h3 id="the-updatemeta-verb">The <code>update:meta</code> verb <a href="#the-updatemeta-verb" class="anchor" aria-hidden="true">#</a></h3>
<p><strong>Synopsis:</strong></p>
<p>The <code>update:meta</code> verb should be used to update the metadata of a key atSign user without having to send or save the value again.</p>
<p>Following is the regex for the <code>update:meta</code> verb</p>
<p><code>^update:meta:((?:public:)|((?&lt;forAtSign&gt;@?[^@\s]-):))?(?&lt;atKey&gt;((?!:{2})[^@])+)@(?&lt;atSign&gt;[^@:\s]-)(:ttl:(?&lt;ttl&gt;\d+))?(:ttb:(?&lt;ttb&gt;\d+))?(:ttr:(?&lt;ttr&gt;\d+))?(:ccd:(?&lt;ccd&gt;true|false))?(:isBinary:(?&lt;isBinary&gt;true|false))?(:isEncrypted:(?&lt;isEncrypted&gt;true|false))?$</code></p>
<p><strong>Example:</strong></p>
<p>Update the metadata of key <code>phone@bob</code> setting <code>isBinary:true</code> while keeping all other metadata as it is.</p>
<p><code>update:meta:phone@bob:isBinary:true</code></p>
<p>Update the metadata of the shared key <code>@alicephone@bob</code> (shared with @alice &amp; shared by @bob) setting <code>ttl:600000</code>, setting <code>isBinary:true</code> and <code>isEncrypted:true</code> while keeping all other metadata as it is.</p>
<p><code>update:meta:@alice:phone@bob:ttl:600000:isBinary:true:isEncrypted:true</code></p>
<p><strong>Response:</strong></p>
<p>The atServer should return the commit id from Commit Log if the update is successful.</p>
<p><code>data:&lt;CommitId&gt;</code></p>
<p>If the user provides the invalid update meta command, then it should respond with the following error and close the connection to the atServer.</p>
<p><code>error:AT0003-Invalid Syntax</code></p>
<p><strong>Description:</strong></p>
<p>The <code>update:meta</code> verb should be used to perform create/update operations on the atServer. The <code>update:meta</code> verb requires the owner of the atServer to authenticate himself/herself to the atServer using <code>from</code> and <code>cram</code> verbs.</p>
<p>The atServer should allow creation of keys with null values. If a key has been created for another atSign user, the atServer should honor &ldquo;autoNotify&rdquo; configuration parameter.</p>
<p><strong>Options:</strong>:</p>
<p><code>&lt;ttl&gt;</code> Required: No. Description: Time to live in milliseconds</p>
<p><code>&lt;ttb&gt;</code> Required: No. Description: Time to birth in milliseconds</p>
<p><code>&lt;ttr&gt;</code> Required: No. Description: Time to refresh in milliseconds</p>
<blockquote>
<p>-1 is a valid value which indicates that the user with whom the key has been shared can keep it forever and the value for this key won&rsquo;t change forever</p>
</blockquote>
<p><code>&lt;ccd&gt;</code> Required: No. Description: A value of &ldquo;true&rdquo; indicates that the cached key needs to be deleted when the atSign user who has originally shared it, deletes it.</p>
<p><code>&lt;for@sign&gt;</code> Required: Yes (Not required when the key is a public key). Description: atSign of the user with whom the key has been shared.</p>
<p><code>&lt;@sign&gt;</code> Required: Yes. Description: atSign of the owner.</p>
<h3 id="the-delete-verb">The <code>delete</code> verb <a href="#the-delete-verb" class="anchor" aria-hidden="true">#</a></h3>
<p><strong>Synopsis:</strong></p>
<p>The <code>delete</code> verb should be used to delete a key from the key store. Only the authenticated owner of the atServer can delete keys that they created.</p>
<p><strong>Example:</strong></p>
<p>Delete a key (that you created) from your atServer.</p>
<p><code>delete:phone@&lt;you&gt;</code></p>
<p><strong>Response:</strong></p>
<p>The atServer returns the commit id of the operation. Note: no information about the key (if it was deleted or if it ever existed in the first place) is given.</p>
<p><code>data:1234</code></p>
<h3 id="the-stats-verb">The <code>stats</code> verb <a href="#the-stats-verb" class="anchor" aria-hidden="true">#</a></h3>
<p><strong>Synopsis:</strong></p>
<p>The <code>stats</code> verb should be used to get the statistics of an atSign.</p>
<p>Following is the regex of the <code>stats</code> verb</p>
<p><code>stats(?&lt;statId&gt;:((?!0)\d+)?(,(\d+))-)?</code></p>
<p><strong>Response:</strong></p>
<p>if the user gives stats all the statistics will be returned as JSON. Following statistics are provided:</p>
<ol>
<li><code>activeInboundConnections</code></li>
<li><code>activeOutboundConnections</code></li>
<li><code>lastCommitId</code></li>
<li><code>secondaryStorageSize</code></li>
<li><code>topAtSigns</code></li>
<li><code>topKeys</code></li>
</ol>
<p><strong>Example:</strong></p>
<p><code>data: [{&quot;id&quot;:&quot;1&quot;,&quot;name&quot;:&quot;activeInboundConnections&quot;,&quot;value&quot;:&quot;1&quot;}, {&quot;id&quot;:&quot;2&quot;,&quot;name&quot;:&quot;activeOutboundConnections&quot;,&quot;value&quot;:&quot;0&quot;}, {&quot;id&quot;:&quot;3&quot;,&quot;name&quot;:&quot;lastCommitID&quot;,&quot;value&quot;:&quot;1&quot;}, {&quot;id&quot;:&quot;4&quot;,&quot;name&quot;:&quot;secondaryStorageSize&quot;,&quot;value&quot;:12560}, {&quot;id&quot;:&quot;5&quot;,&quot;name&quot;:&quot;topAtSigns&quot;,&quot;value&quot;:{&quot;@bob&quot;:1}}, {&quot;id&quot;:&quot;6&quot;,&quot;name&quot;:&quot;topKeys&quot;,&quot;value&quot;:{&quot;publickey@alice&quot;:1}}]</code></p>
<p>Individual statistics can be retrieved using the respective Id.</p>
<pre tabindex="0"><code>@alice@stats:1
data: [{&#34;id&#34;:&#34;1&#34;,&#34;name&#34;:&#34;activeInboundConnections&#34;,&#34;value&#34;:&#34;1&#34;}]
</code></pre><h3 id="the-sync-verb">The <code>sync</code> verb <a href="#the-sync-verb" class="anchor" aria-hidden="true">#</a></h3>
<p>The <code>sync</code> verb enables to synchronize the keys between the local atServer and remote atServer.</p>
<p>Following is the regex:</p>
<p><code>sync:(?&lt;from_commit_seq&gt;[0-9]+$|-1)</code></p>
<p><strong>Response:</strong></p>
<p>The <code>sync</code> verb returns a json array of the commit entries from the given commit id to the current commit id. Further, the <code>sync</code> verb accepts -1 as argument which returns all the commit entries.</p>
<pre tabindex="0"><code>data:[{&#34;atKey&#34;:&#34;@bob:phone@alice&#34;,&#34;operation&#34;:&#34;+&#34;,&#34;opTime&#34;:&#34;2020-10-26 11:57:43.732&#34;,&#34;commitId&#34;:0,&#34;value&#34;:&#34;12345&#34;,&#34;metadata&#34;:{&#34;ttr&#34;:&#34;36000000&#34;,&#34;ccd&#34;:&#34;false&#34;}},
{&#34;atKey&#34;:&#34;@bob:shared_key@alice&#34;,&#34;operation&#34;:&#34;-&#34;,&#34;opTime&#34;:&#34;2020-10-26 09:44:54.382219Z&#34;,&#34;commitId&#34;:1}]
</code></pre><h3 id="the-notify-verb">The <code>notify</code> verb <a href="#the-notify-verb" class="anchor" aria-hidden="true">#</a></h3>
<p><strong>Synopsis:</strong></p>
<p>The <code>notify</code> verb enables us to notify the atSign user of some data event.</p>
<p>The following is the regex for the <code>notify</code> verb</p>
<pre tabindex="0"><code>notify:((?&lt;operation&gt;update|delete):)?(messageType:(?&lt;messageType&gt;key|text):)?(priority:(?&lt;priority&gt;low|medium|high):)?(strategy:(?&lt;strategy&gt;all|latest):)?(latestN:(?&lt;latestN&gt;\d+):)?(notifier:(?&lt;notifier&gt;[^\s:]+):)?(ttln:(?&lt;ttln&gt;\d+):)?(ttl:(?&lt;ttl&gt;\d+):)?(ttb:(?&lt;ttb&gt;\d+):)?(ttr:(?&lt;ttr&gt;(-)?\d+):)?(ccd:(?&lt;ccd&gt;true|false):)?(@(?&lt;forAtSign&gt;[^@:\s]*)):(?&lt;atKey&gt;[^:@]((?!:{2})[^@])+)(@(?&lt;atSign&gt;[^@:\s]+))?(:(?&lt;value&gt;.+))?$
</code></pre><p><strong>Example:</strong></p>
<p>Notify <code>@alice</code> that you have a shared key <code>@alice:test@&lt;you&gt;</code> with an updated value waiting for them to lookup.</p>
<p><code>notify:update:@alice:test@&lt;you&gt;</code></p>
<p>Notify <code>@alice</code> that you have a shared key <code>@alice:test@&lt;you&gt;</code> that was deleted.</p>
<p><code>notify:delete:@alice:test@&lt;you&gt;</code></p>
<p>Notify <code>@alice</code> with a message <code>my sample message to bob</code>.</p>
<p><code>notify:messageType:text:@&lt;you&gt;:my sample message to bob</code></p>
<p><strong>Response:</strong></p>
<p>When a key is notified successfully, returns</p>
<p><code>data:&lt;notificationId&gt;</code></p>
<p>where the notificationId is the id of the sent notification.</p>
<p><strong>Description:</strong></p>
<p>When an atSign user notifies the key to another atSign user, an entry has to be created in received notifications list on the user who has shared the key and an entry has to be created in sent notifications list on the user to whom the key is to be notified. When auto notify is set to true, when a key is created/updated and deleted notification is triggered to another atSign user.</p>
<h4 id="notify-list">Notify List <a href="#notify-list" class="anchor" aria-hidden="true">#</a></h4>
<p><strong>Synopsis:</strong></p>
<p>Notify list returns a list of notifications.</p>
<p>The following is the regex</p>
<p><code>notify:(list (?&lt;regex&gt;.-)|list$)</code></p>
<p><strong>Example:</strong></p>
<p>List all notifications that you have received.</p>
<p><code>notify:list</code></p>
<p><strong>Response:</strong></p>
<p>If the user is the owner, returns a list of received notifications. If a user is pol authenticated user, returns a list of sent notifications</p>
<p><code>data:[{&quot;id&quot;:&quot;0e5e9e89-c9cb-423b-8972-8c5487215990&quot;,&quot;from&quot;:&quot;@alice&quot;,&quot;to&quot;:&quot;@bob&quot;,&quot;key&quot;:&quot;@bob:phone@alice&quot;,&quot;value&quot;:12345,&quot;operation&quot;:&quot;update&quot;,&quot;epochMillis&quot;:1603714122636}]</code></p>
<h4 id="notify-remove">Notify Remove <a href="#notify-remove" class="anchor" aria-hidden="true">#</a></h4>
<p><strong>Synopsis:</strong></p>
<p>Notify remove removes a notification from the notification log.</p>
<p>The following is the regex</p>
<p><code>notify:(remove:(?&lt;notificationId&gt;[^:]+$))</code></p>
<p><strong>Example:</strong></p>
<p>Remove a notification that you received that has id <code>0e5e9e89-c9cb-423b-8972-8c5487215990</code>.</p>
<p><code>notify:remove:0e5e9e89-c9cb-423b-8972-8c5487215990</code></p>
<p><strong>Response:</strong></p>
<p>If successful, returns</p>
<p><code>data:success</code></p>
<h4 id="notify-status">Notify Status <a href="#notify-status" class="anchor" aria-hidden="true">#</a></h4>
<p><strong>Synopsis:</strong></p>
<p>Notify status returns the status of a notification that was sent to another atSign user.</p>
<p>The following is the regex</p>
<p><code>notify:(status:(?&lt;notificationId&gt;[^:]+$))</code></p>
<p><strong>Example::</strong></p>
<p>Check the status of the notification that you sent with id <code>0e5e9e89-c9cb-423b-8972-8c5487215990</code>.</p>
<p><code>notify:status:0e5e9e89-c9cb-423b-8972-8c5487215990</code></p>
<p><strong>Response:</strong></p>
<p>Returns the status of the notification</p>
<p><code>data:delivered</code></p>
<p><code>data:undelivered</code></p>
<h3 id="the-monitor-verb">The <code>monitor</code> verb <a href="#the-monitor-verb" class="anchor" aria-hidden="true">#</a></h3>
<p><strong>Synopsis:</strong></p>
<p>The <code>monitor</code> verb streams received notifications.</p>
<p>The following is the regex</p>
<p><code>^monitor$|^monitor ?(?&lt;regex&gt;.-)?)$</code></p>
<p><strong>Example:</strong></p>
<p>Start monitoring all notifications in this current session.</p>
<p><code>monitor</code></p>
<p><strong>Response:</strong></p>
<p>Returns a stream of notifications</p>
<pre tabindex="0"><code>@alice@monitor
notification: {&#34;id&#34;:&#34;773e226d-dac2-4269-b1ee-64d7ce93a42f&#34;,&#34;from&#34;:&#34;@bob&#34;,&#34;to&#34;:&#34;@alice&#34;,&#34;key&#34;:&#34;@alice:phone@bob&#34;,&#34;value&#34;:null,&#34;operation&#34;:&#34;update&#34;,&#34;epochMillis&#34;:1603714720965}
</code></pre><p><strong>Description:</strong></p>
<p>The <code>monitor</code> verb accepts an optional parameter to filter the notifications by passing filter criteria as regex to <code>monitor</code> verb.</p>
<h2 id="error-codes">Error Codes <a href="#error-codes" class="anchor" aria-hidden="true">#</a></h2>
<table>
<thead>
<tr>
<th>Error Code</th>
<th>Error Message</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>AT0001</td>
<td>Server exception</td>
<td>Exception occurs when there is an issue while starting the server.</td>
</tr>
<tr>
<td>AT0002</td>
<td>Datastore exception</td>
<td>Exception occurs during keystore operations (GET/PUT/DELETE).</td>
</tr>
<tr>
<td>AT0003</td>
<td>Invalid syntax</td>
<td>Exception occurs if we give any invalid command to the server.</td>
</tr>
<tr>
<td>AT0004</td>
<td>Socket error</td>
<td>Exception occurs when socket connection to an atServer cannot be established.</td>
</tr>
<tr>
<td>AT0005</td>
<td>Buffer limit exceeded</td>
<td>This exception occurs when input/output message size reaches the maximum limit configured in the server.</td>
</tr>
<tr>
<td>AT0008</td>
<td>Handshake failure</td>
<td>this exception is for any exception during the handshake process of two secondaries.</td>
</tr>
<tr>
<td>AT0009</td>
<td>Unauthorized client in the request</td>
<td>Occurs when an unsuccessful handshake happens between two secondaries.</td>
</tr>
<tr>
<td>AT0010</td>
<td>Internal server error</td>
<td>This is for any server related errors.</td>
</tr>
<tr>
<td>AT0011</td>
<td>Internal server exception</td>
<td>This exception is used for any server related exceptions.</td>
</tr>
<tr>
<td>AT0012</td>
<td>Inbound connection limit exceeded</td>
<td>This exception will occur when the number of active clients reaches the maximum limit configured.</td>
</tr>
<tr>
<td>AT0401</td>
<td>Client authentication failed</td>
<td>This exception occurs when client authentication fails or client tries to execute any verb which needs authentication before successful authentication.</td>
</tr>
<tr>
<td>AT0013</td>
<td>Connection exception</td>
<td>This will occur when a blocked user tries to connect to the secondary.</td>
</tr>
<tr>
<td>AT0014</td>
<td>Unknown AtClient exception</td>
<td>This exception will be thrown while performing any operations (GET/UPDATE/DELETE) using atClient SDK.</td>
</tr>
<tr>
<td>AT0015</td>
<td>Key not found</td>
<td>This exception will be thrown when the key is not available for encryption/decryption.</td>
</tr>
<tr>
<td>AT0021</td>
<td>Unable to connect to secondary</td>
<td>This exception will occur when we are unable to connect to secondary.</td>
</tr>
</tbody>
</table>

			<div class="card-list">
					
					
					
						
							
								<div class="card my-3">
									<div class="card-body">
										<a class="stretched-link" href="https://dev3.atsign.wtf/atplatform/atplatformoverview/">Overview &rarr;</a>
									</div>
								</div>
							
						
					
						
							
								<div class="card my-3">
									<div class="card-body">
										<a class="stretched-link" href="https://dev3.atsign.wtf/atplatform/architecture/">Architecture &rarr;</a>
									</div>
								</div>
							
						
					
						
							
						
					
						
							
								<div class="card my-3">
									<div class="card-body">
										<a class="stretched-link" href="https://dev3.atsign.wtf/atplatform/rootserver/">AtDirectory &rarr;</a>
									</div>
								</div>
							
						
					
						
							
								<div class="card my-3">
									<div class="card-body">
										<a class="stretched-link" href="https://dev3.atsign.wtf/atplatform/secondaryserver/">AtServer &rarr;</a>
									</div>
								</div>
							
						
					
				</div>
			<div class="footer">
    <div class="footer-logo">
        
        
            <img class="toggle-light" src="https://dev3.atsign.wtf/img/branding/dark/atsign-dark.png" width="124em">
        

        
        
            <img class="toggle-dark" src="https://dev3.atsign.wtf/img/branding/light/atsign-light.svg" width="124em">
        
    </div>
    <div class="footer-terms">
        <a href="https://atsign.com/terms-conditions">Terms and Conditions</a>
        <a href="https://atsign.com/privacy-policy">Privacy Policy</a>
    </div>
    <div class="footer-copy">
        © 2023 Atsign
    </div>
    <div class="footer-free">
        This is a cookie-free site
    </div>
    <div class="footer-body">
        <p>
            Learn more about us at <a href="https://atsign.com">atsign.com</a>
        </p>
        <p>
            To get or manage atSigns, please visit the <a href="https://my.atsign.com/go">Registrar</a>
        </p>
        <p>
            For general inquiries, email us: <a href="mailto:info@atsign.com">info@atsign.com</a>
        </p>
        <p>Last updated on 2023-10-17 17:25:21 &#43;0100 &#43;0100</p>
        <p> By Chris Swan on <a href='https://github.com/atsign-foundation/docs.atsign.com/commit/ec0fa3a'>ec0fa3a</a></p>
    </div>
    <div class="footer-social">
        <a target="_blank" href="https://github.com/atsign-foundation">
            
            
                <img src="https://dev3.atsign.wtf/img/footer-logos/github.png" height="48em">
            
        </a>
        <a target="_blank" href="https://wavi.ng/@wavi">
            
            
                <img src="https://dev3.atsign.wtf/img/footer-logos/wavi.webp" height="48em">
            
        </a>
        <a target="_blank" href="https://linkedin.com/company/atsigncompany/">
            
            
                <img src="https://dev3.atsign.wtf/img/footer-logos/linkedin.webp" height="48em">
            
        </a>
        <a target="_blank" href="https://twitter.com/atsigncompany">
            
            
                <img src="https://dev3.atsign.wtf/img/footer-logos/twitter.webp" height="48em">
            
        </a>
        <a target="_blank" href="https://www.youtube.com/c/AtsignCo">
            
            
                <img src="https://dev3.atsign.wtf/img/footer-logos/youtube.webp" height="48em">
            
        </a>
        <a target="_blank" href="https://discord.gg/55sHTQFxfz">
            
            
                <img src="https://dev3.atsign.wtf/img/footer-logos/discord.png" height="48em">
            
        </a>
    </div>
</div>
			<div class="docs-navigation d-flex justify-content-between">
	
    </div>

		
			
		</main>
	</div>

      </div>
    </div>
    
    
    <footer class="footer text-muted">
  <div class="container-fluid">
    <div class="row">
      <div class="col-lg-8 order-last order-lg-first">
        <ul class="list-inline">
          <li class="list-inline-item"></li>
        </ul>
      </div>
      <div class="col-lg-8 order-first order-lg-last text-lg-end">
        <ul class="list-inline">
          </ul>
      </div>
    </div>
  </div>
</footer>
    <script src="https://dev3.atsign.wtf/js/bootstrap.js" defer></script>
  <script src="https://dev3.atsign.wtf/js/highlight.js" defer></script>
  <script src="https://dev3.atsign.wtf/main.js" defer></script>
  <script src="https://dev3.atsign.wtf/index.js" defer></script>
  
  </body>
</html>